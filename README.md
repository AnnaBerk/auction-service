# Сервис Аукционов


Сервис Аукционов предоставляет функциональность для создания лотов, пополнения балансов пользователей и размещения ставок. Он построен с использованием gRPC для внутренней коммуникации и HTTP/REST API для взаимодействия с внешними клиентами. Основные компоненты проекта разделены на несколько слоёв: домен, инфраструктура, интерфейсы и приложения.

### Архитектура

Проект структурирован с использованием подхода DDD (Domain-Driven Design).

- **Домен** – включает бизнес-логику, сущности аукциона, сервисы и ошибки.
- **Инфраструктура** – содержит реализацию внешних сервисов, таких как уведомления и платежи, а также работу с репозиториями.
- **Интерфейсы** – отвечает за взаимодействие с внешними системами через RPC и HTTP интерфейсы.
- **Приложение** – содержит рабочие процессы, логику запуска сервиса и миграции базы данных.

## Эндпоинты

### Создать Лот

- **Метод:** POST
- **URL:** `/v1/lots`
- **Описание:** Создаёт новый лот для аукциона.

#### Тело запроса:

```json
{
  "title": "Название лота",
  "start_price": 1000,
  "step": 100,
  "user_id": 1, 
   "closing_time": "2024-10-17T10:00:00Z"
}
```
## Пример ответа:

```json
{
  "lot_id": 123
}
```
### Пополнить Баланс
- **Метод:** POST
- **URL:** `/v1/refill`
- **Описание:** Пополняет баланс пользователя.

#### Тело запроса:

```json

{
"user_id": 1,
"amount": 5000
}
```
## Пример ответа:

```json

{
"message": "Balance refilled successfully"
}
```
Разместить Ставку

- **Метод:** POST
- **URL:** `/v1/bid`
- **Описание:** Размещает ставку на конкретный лот.

#### Тело запроса:

```json

{
"user_id": 1,
"lot_id": 123,
"bid_amount": 1200
}
```
## Пример ответа:

```json

{
"message": "Bid placed"
}
```

## Установка

1. Клонируйте репозиторий

2. Запустите Docker Compose:

    ```bash
    docker-compose -f docker-compose.yml up --build
    ```

После этого сервис будет запущен и доступен по следующим адресам:

- gRPC сервер: `localhost:50051`
- HTTP/REST шлюз: `localhost:8080`

